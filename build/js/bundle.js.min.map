{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","aplicarFuncion","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","deshabilitarFechaAnterior","horaCita","document","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","seccionAnterior","querySelector","classList","remove","add","tabAnterior","servicio","onclick","seleccionarServicio","elemento","console","log","tagName","parentElement","contains","eliminarServicio","idServicio","agregarServicio","id","firstElementChild","textContent","precio","nextElementSibling","filter","objeto","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","createElement","appendChild","headingCita","innerHTML","serviciosCita","headingServicios","cantidad","contenedorServicio","textoServicio","precioServicio","totalServicio","split","trim","cantidadPagar","nombreTexto","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","getUTCFullYear","inputFecha","fechaAhora","year","getFullYear","mes","getMonth","getDate","fechaDeshabilitada","min","inputHora"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\r\n\r\nconst cita = {\r\n    nombre: '',\r\n    fecha: '',\r\n    hora: '',\r\n    servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    iniciarApp();\r\n});\r\n\r\nfunction iniciarApp() {\r\n    /* mostrarServicios(); */\r\n    aplicarFuncion();\r\n\r\n    // Resalta el div actual segun el tab al que se presiona\r\n    mostrarSeccion();\r\n\r\n    // Oculta o muestra una seccion segun el tab al que se presiona\r\n    cambiarSeccion();\r\n\r\n    // Paginacion siguiente y anterior\r\n    paginaSiguiente();\r\n    paginaAnterior();\r\n\r\n    // Comprueba la pagina actual para ocultar o mostrar la paginacion\r\n    botonesPaginador();\r\n\r\n    // Muestra el resumen de la cita (o mensaje de error en caso de no pasar la validacion)\r\n    mostrarResumen();\r\n\r\n    // Almacena el nombre de la cita en el objeto\r\n    nombreCita();\r\n\r\n    // Almacena la fecha de la cita en el objeto\r\n    fechaCita();\r\n    // Deshabilita dias pasados\r\n    deshabilitarFechaAnterior();\r\n\r\n    // Almacena la hora de la cita en el objeto\r\n    horaCita();\r\n\r\n}\r\n\r\nfunction cambiarSeccion() {\r\n    const enlaces = document.querySelectorAll('.tabs button');\r\n    \r\n    enlaces.forEach( enlace => {\r\n        enlace.addEventListener('click', e => {\r\n            e.preventDefault();\r\n\r\n            pagina = parseInt(e.target.dataset.paso);\r\n\r\n            // LLamar la funcion de mostrar seccion\r\n            mostrarSeccion();\r\n\r\n            botonesPaginador();\r\n        } )\r\n    } )\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n\r\n    // Eliminar mostrar-seccion de la seccion anterior\r\n    const seccionAnterior = document.querySelector('.mostrar-seccion');\r\n    if(seccionAnterior) {\r\n        seccionAnterior.classList.remove('mostrar-seccion');\r\n    }\r\n\r\n    const seccionActual = document.querySelector(`#paso-${pagina}`);\r\n    seccionActual.classList.add('mostrar-seccion');\r\n    \r\n    // Eliminar la clase de actual en el tab anterior\r\n    const tabAnterior = document.querySelector('.tabs .actual');\r\n    if(tabAnterior) {\r\n        tabAnterior.classList.remove('actual');\r\n    }\r\n\r\n    // Resalta el tab actual\r\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n    tab.classList.add('actual');\r\n}\r\n\r\n/* async function mostrarServicios() {\r\n    try {\r\n        const resultado = await fetch('./servicios.json');   \r\n        const db = await resultado.json();\r\n        const { servicios } = db;\r\n\r\n        // Generar el html\r\n        servicios.forEach( servicio => {\r\n            const { id, nombre, precio} = servicio;\r\n\r\n            // DOM Scripting\r\n            // Generar nombre de servicio\r\n            const nombreServicio = document.createElement('P');\r\n            nombreServicio.textContent = nombre;\r\n            nombreServicio.classList.add('nombre-servicio');\r\n            \r\n            // Generar el precio del servicio\r\n            const precioServicio = document.createElement('P');\r\n            precioServicio.textContent = ('$ ' + precio); // `$ ${precio}`\r\n            precioServicio.classList.add('precio-servicio');\r\n\r\n            // Generar div contenedor de servicio\r\n            const servicioDiv = document.createElement('DIV');\r\n            servicioDiv.classList.add('servicio');\r\n            servicioDiv.dataset.idServicio = id;\r\n            \r\n            // Selecciona un servicio para la cita\r\n            servicioDiv.onclick = seleccionarServicio;\r\n\r\n            // Inyectar precio y nombre al div de servicio\r\n            servicioDiv.appendChild(nombreServicio);\r\n            servicioDiv.appendChild(precioServicio);\r\n\r\n            // Inyectar en HTML\r\n            document.querySelector('#servicios').appendChild(servicioDiv);\r\n\r\n\r\n\r\n        } );\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n} */\r\n\r\nfunction aplicarFuncion() {\r\n    const servicioDiv = document.querySelectorAll('.servicio');\r\n    servicioDiv.forEach(servicio => {\r\n        servicio.onclick = seleccionarServicio;\r\n    })\r\n}\r\n\r\n\r\nfunction seleccionarServicio(e) {\r\n    \r\n    let elemento;\r\n    console.log(e);\r\n    //  Forzar que el elemento al que le damos click sea el DIV\r\n     if(e.target.tagName === 'P') {\r\n         elemento = e.target.parentElement;\r\n     } else {\r\n         elemento = e.target;\r\n     }\r\n    \r\n    if(elemento.classList.contains('seleccionado')) {\r\n        elemento.classList.remove('seleccionado');\r\n\r\n        const id = parseInt(elemento.dataset.idServicio);\r\n\r\n        eliminarServicio(id);\r\n    } else {\r\n        elemento.classList.add('seleccionado');\r\n\r\n        const servicioObj = {\r\n            id: parseInt(elemento.dataset.idServicio),\r\n            nombre: elemento.firstElementChild.textContent,\r\n            precio: elemento.firstElementChild.nextElementSibling.textContent\r\n        }\r\n        // console.log(servicioObj)\r\n\r\n        agregarServicio(servicioObj);\r\n    }\r\n}\r\n\r\nfunction eliminarServicio(id) {\r\n    const { servicios } = cita;\r\n    cita.servicios = servicios.filter(servicio => servicio.id !== id);\r\n}\r\n\r\nfunction agregarServicio(objeto) {\r\n    const {servicios} = cita;\r\n\r\n    cita.servicios = [...servicios, objeto];\r\n}\r\n\r\nfunction paginaSiguiente() {\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n    paginaSiguiente.addEventListener('click', () => {\r\n        pagina++;\r\n\r\n        botonesPaginador();\r\n    } )\r\n}\r\n\r\nfunction paginaAnterior() {\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    paginaAnterior.addEventListener('click', () => {\r\n        pagina--;\r\n        \r\n        botonesPaginador();\r\n    } )\r\n}\r\n\r\nfunction botonesPaginador() {\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n\r\n    if(pagina === 1) {\r\n        paginaAnterior.classList.add('ocultar');\r\n    } else if(pagina === 3) {\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.add('ocultar');\r\n        mostrarResumen(); // Estamos en la pagina 3, carga el resumen de la cita\r\n    } else {\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    }\r\n\r\n    mostrarSeccion();\r\n}\r\n\r\nfunction mostrarResumen() {\r\n    // Destructuring\r\n    const {nombre, fecha, hora, servicios } = cita;\r\n\r\n    // Seleccionar el resumen\r\n    const resumenDiv = document.querySelector('.contenido-resumen');\r\n\r\n    // Limpia el html previo\r\n    while(resumenDiv.firstChild) {\r\n        resumenDiv.removeChild(resumenDiv.firstChild);\r\n    }\r\n\r\n    // Validacion de objeto\r\n    if(Object.values(cita).includes('') ) {\r\n        const noServicios = document.createElement('P');\r\n        noServicios.textContent = 'Faltan datos de servicios, hora, fecha o nombre';\r\n        noServicios.classList.add('invalidar-cita', 'text-center');\r\n\r\n        // Agregar a resumenDiv\r\n        resumenDiv.appendChild(noServicios);\r\n\r\n        return;\r\n    }\r\n\r\n    const headingCita = document.createElement('H3');\r\n    headingCita.textContent = 'Resumen de Cita';\r\n    \r\n    // Mostrar el resumen\r\n    const nombreCita = document.createElement('P');\r\n    nombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`;\r\n    \r\n    const fechaCita = document.createElement('P');\r\n    fechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`;\r\n    \r\n    const horaCita = document.createElement('P');\r\n    horaCita.innerHTML = `<span>Hora:</span> ${hora}`;\r\n\r\n    const serviciosCita = document.createElement('DIV');\r\n    serviciosCita.classList.add('resumen-servicios');\r\n\r\n    const headingServicios = document.createElement('H3');\r\n    headingServicios.textContent = 'Resumen de servicios';\r\n\r\n    serviciosCita.appendChild(headingServicios);\r\n\r\n    let cantidad = 0;\r\n\r\n    // Iterar sobre el arreglo de servicios\r\n    servicios.forEach( servicio => {\r\n        const {nombre, precio} = servicio;\r\n\r\n        const contenedorServicio = document.createElement('DIV');\r\n        contenedorServicio.classList.add('contenedor-servicio');\r\n        \r\n        const textoServicio = document.createElement('P');\r\n        textoServicio.textContent = nombre;\r\n      \r\n        const precioServicio = document.createElement('P');\r\n        precioServicio.textContent = precio;\r\n        precioServicio.classList.add('precio');\r\n\r\n        const totalServicio = precio.split('$');\r\n\r\n        cantidad += parseInt(totalServicio[1].trim());\r\n\r\n        // Colocar texto y precio en el div \r\n        contenedorServicio.appendChild(textoServicio);\r\n        contenedorServicio.appendChild(precioServicio);\r\n\r\n        serviciosCita.appendChild(contenedorServicio);\r\n\r\n    } )\r\n    \r\n    resumenDiv.appendChild(headingCita);\r\n    resumenDiv.appendChild(nombreCita);\r\n    resumenDiv.appendChild(fechaCita);\r\n    resumenDiv.appendChild(horaCita);\r\n    resumenDiv.appendChild(serviciosCita);\r\n\r\n    const cantidadPagar = document.createElement('P');\r\n    cantidadPagar.classList.add('total');\r\n    cantidadPagar.innerHTML = `<span>Total a Pagar: </span>$ ${cantidad} `;\r\n\r\n    resumenDiv.appendChild(cantidadPagar);\r\n\r\n}\r\n\r\nfunction nombreCita() {\r\n    const nombreInput = document.querySelector('#nombre');\r\n\r\n    nombreInput.addEventListener('input', e => {\r\n        const nombreTexto = e.target.value.trim();\r\n        \r\n        // Validacion de que nombre texto debe contener algo\r\n        if(nombreTexto === '' || nombreTexto.length < 3) {\r\n            mostrarAlerta('nombre no valido', 'error');\r\n        } else {\r\n            const alerta = document.querySelector('.alerta')\r\n            if(alerta) {\r\n                alerta.remove();\r\n            }\r\n            cita.nombre = nombreTexto;\r\n        }\r\n    } );\r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo) {\r\n    \r\n    // Si hay una alerta previa, entonces no mostrar otra\r\n    const alertaPrevia = document.querySelector('.alerta')\r\n    if(alertaPrevia) {\r\n        return;\r\n    }\r\n\r\n    const alerta = document.createElement('DIV');\r\n    alerta.textContent = mensaje;\r\n    alerta.classList.add('alerta');\r\n\r\n    if(tipo === 'error') {\r\n        alerta.classList.add('error');\r\n    } \r\n    // Insertar en el html\r\n    const formulario = document.querySelector('.formulario');\r\n    formulario.appendChild(alerta);\r\n\r\n    // Eliminar la alerta despues de 3 segundos\r\n    setTimeout(() => {\r\n        alerta.remove();\r\n    }, 3000);\r\n}\r\n\r\nfunction fechaCita() {\r\n    const fechaInput = document.querySelector('#fecha');\r\n    fechaInput.addEventListener('input', (e) => {\r\n        \r\n        const dia = new Date(e.target.value).getUTCDay();\r\n        const año = new Date(e.target.value).getUTCFullYear();\r\n\r\n        if ([0, 6].includes(dia)) {\r\n            e.preventDefault();\r\n            fechaInput.value = '';\r\n\r\n            mostrarAlerta('Fines de Semana no son permitidos, ingrese una fecha valida', 'error');\r\n        } else {\r\n            cita.fecha = fechaInput.value;\r\n            // console.log(cita);\r\n        }\r\n        \r\n    } )\r\n}\r\n\r\nfunction deshabilitarFechaAnterior() {\r\n    const inputFecha = document.querySelector('#fecha');\r\n\r\n    const fechaAhora = new Date();\r\n    const year = fechaAhora.getFullYear();\r\n    let mes = fechaAhora.getMonth() + 1;\r\n    let dia = fechaAhora.getDate() + 1;\r\n    if(mes < 10) {\r\n        mes = `0${mes}`\r\n    }\r\n    if(dia < 10) {\r\n        dia = `0${dia}`\r\n    }\r\n\r\n    // Formato deseado: AAAA-MM-DD\r\n    const fechaDeshabilitada = `${year}-${mes}-${dia}`;\r\n    inputFecha.min = fechaDeshabilitada;\r\n}\r\n\r\nfunction horaCita() {\r\n    const inputHora = document.querySelector('#hora');\r\n    inputHora.addEventListener('input', e => {\r\n        \r\n        const horaCita = e.target.value;\r\n        const hora = horaCita.split(':')\r\n\r\n        if(hora[0] < 09 || hora[0] > 18) {\r\n            mostrarAlerta('La tienda abre de 9hs a 18hs', 'error');\r\n            setTimeout(() => {\r\n                inputHora.value = '';\r\n            }, 3000);\r\n        } else {\r\n            cita.hora = horaCita;\r\n        }\r\n    } )\r\n}"]}